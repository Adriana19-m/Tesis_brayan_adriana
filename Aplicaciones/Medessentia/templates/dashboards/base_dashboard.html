{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Panel | Medessentia{% endblock %}</title>

  <!-- Bootstrap 5 (MaterialPro free usa BS5) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Tu CSS (opcional) -->
  <!-- <link href="{% static 'materialpro/style.css' %}" rel="stylesheet"> -->

  <style>
    /* toque material/clean */
    body{ background:#f5f7fb; }
    .app { display:flex; min-height:100vh; }
    .sidebar { width:260px; background:#ffffff; border-right:1px solid #e9eef5; }
    .sidebar .brand { padding:16px 20px; font-weight:700; font-size:18px; }
    .sidebar a { display:block; padding:10px 16px; color:#39465e; text-decoration:none; border-radius:10px; margin:4px 8px; }
    .sidebar a.active, .sidebar a:hover { background:#eef2ff; color:#2f55d4; }
    .content { flex:1; display:flex; flex-direction:column; }
    .topbar { background:#fff; border-bottom:1px solid #e9eef5; padding:10px 16px; }
    .page { padding:20px; }
    .card { border:0; box-shadow: 0 6px 18px rgba(0,0,0,.05); border-radius:16px; }
    @media (max-width: 992px){ .sidebar{ position:fixed; left:-260px; top:0; bottom:0; z-index:1035; }
      .sidebar.show{ left:0; transition:left .2s; } }
  </style>

  {% block extra_css %}{% endblock %}
</head>
<body>
<div class="app">

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="brand d-flex align-items-center justify-content-between">
      <span>Medessentia</span>
      <button class="btn btn-sm d-lg-none" onclick="toggleSidebar()">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>

    {% include "dashboards/_sidebar.html" %}
  </aside>

  <!-- Main -->
  <div class="content">
    <!-- Topbar -->
    <div class="topbar d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center gap-2">
        <button class="btn btn-outline-secondary d-lg-none" onclick="toggleSidebar()">
          <i class="bi bi-list"></i>
        </button>
        <h6 class="mb-0">{% block page_title %}Dashboard{% endblock %}</h6>
      </div>

      <div class="d-flex align-items-center gap-3">
        <span class="text-muted small">
          {{ user.first_name|default:user.username }}
          {% if es_admin %}<span class="badge text-bg-danger ms-1">Admin</span>{% endif %}
          {% if es_doctor %}<span class="badge text-bg-primary ms-1">Doctor</span>{% endif %}
        </span>
        <a class="btn btn-sm btn-outline-secondary" href="{% url 'logout' %}">
          <i class="bi bi-box-arrow-right me-1"></i> Salir
        </a>
      </div>
    </div>

    <!-- Page content -->
    <main class="page container-fluid">
      {% include "dashboards/_messages.html" %}
      {% block content %}{% endblock %}
    </main>
  </div>
</div>

<script>
  function toggleSidebar(){
    document.getElementById('sidebar').classList.toggle('show');
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
